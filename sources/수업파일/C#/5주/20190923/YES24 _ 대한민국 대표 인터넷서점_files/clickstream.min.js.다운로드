var clickstream = function () { var n = !1, r = document.location.protocol, t = function (n) { for (var r = n + "=", t = 0, i; t <= document.cookie.length;) { if (i = t + r.length, document.cookie.substring(t, i) == r) return (endOfCookie = document.cookie.indexOf(";", i)) == -1 && (endOfCookie = document.cookie.length), unescape(document.cookie.substring(i, endOfCookie)); if (t = document.cookie.indexOf(" ", t) + 1, t == 0) break } return "" }, v = function (n, t) { var i = new Date; i.setSeconds(i.getSeconds() + 86400); document.cookie = n + "=" + escape(t) + "; path=/; domain=.yes24.com; expires=" + i.toGMTString() + ";" }, y = function () { return /Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i.test(navigator.userAgent) }, u = { getOS: function () { return this.searchString(this.dataOS) || "an unknown OS" }, getBrowser: function () { return this.searchString(this.dataBrowser) || "An unknown browser" }, dataOS: [{ string: navigator.platform, subString: "Win", identity: "Windows" }, { string: navigator.platform, subString: "Mac", identity: "Mac" }, { string: navigator.userAgent, subString: "iPod", identity: "iPod" }, { string: navigator.userAgent, subString: "iPad", identity: "iPad" }, { string: navigator.userAgent, subString: "iPhone", identity: "iPhone" }, { string: navigator.platform, subString: "Linux", identity: "Linux" }], dataBrowser: [{ string: navigator.userAgent, subString: "Chrome", identity: "Chrome" }, { string: navigator.userAgent, subString: "OmniWeb", versionSearch: "OmniWeb/", identity: "OmniWeb" }, { string: navigator.vendor, subString: "Apple", identity: "Safari", versionSearch: "Version" }, { prop: window.opera, identity: "Opera", versionSearch: "Version" }, { string: navigator.vendor, subString: "iCab", identity: "iCab" }, { string: navigator.vendor, subString: "KDE", identity: "Konqueror" }, { string: navigator.userAgent, subString: "Firefox", identity: "Firefox" }, { string: navigator.vendor, subString: "Camino", identity: "Camino" }, { string: navigator.userAgent, subString: "Netscape", identity: "Netscape" }, { string: navigator.userAgent, subString: "MSIE", identity: "Explorer", versionSearch: "MSIE" }, { string: navigator.userAgent, subString: "Gecko", identity: "Mozilla", versionSearch: "rv" }, { string: navigator.userAgent, subString: "Mozilla", identity: "Netscape", versionSearch: "Mozilla" }], searchString: function (n) { for (var i, r, t = 0; t < n.length; t++) if (i = n[t].string, r = n[t].prop, this.versionSearchString = n[t].versionSearch || n[t].identity, i) { if (i.indexOf(n[t].subString) != -1) return n[t].identity } else if (r) return n[t].identity } }, tt = { options: { enableHighAccuracy: !0, timeout: 2e3, maximumAge: 0 }, success: function (n) { var t = n.coords }, error: function () { }, init: function () { navigator.geolocation.getCurrentPosition(this.success, this.error, this.options) } }, it = function () { var n = function () { return Math.floor((1 + Math.random()) * 65536).toString(16).substring(1) }; return n() + n() + "-" + n() + "-" + n() + "-" + n() + "-" + n() + n() + n() }, rt = function () { return navigator.userAgent.toLowerCase().indexOf("firefox") > -1 }, p = n == !0 ? "http://ycstreamlocal.yes24.com/Clickstream/UserLogging" : r + "//ycstream.yes24.com/Clickstream/UserLogging", w = n == !0 ? "http://ycstreamlocal.yes24.com/Clickstream/UserLogging_POST" : r + "//ycstream.yes24.com/Clickstream/UserLogging_POST", f = y() ? "M" : "P", e = t("ServiceCookies") || "", o = u.getOS(), s = u.getBrowser(), h = screen.colorDepth, b = t("PCID"), c = screen.width.toString().concat("x", screen.height.toString()), l = document.referrer || "", a = navigator.language, k = function (n, i, r) { var u, v = ""; try { u = event.clientX; v = event.clientX } catch (y) { } return n.concat("?log_code=", i).concat("&page_code=", r).concat("&referrer=", l).concat("&service_cookie_value=", e).concat("&lang_code=", a).concat("&os_info=", o).concat("&browser_info=", s).concat("&resolution=", c).concat("&color_depth=", h).concat("&PCID=", t("PCID")).concat("&device_type=", f).concat("&platform=", navigator.platform).concat("&coordinateX=", u).concat("&coordinateY=", v) }, d = function (n, t) { var r, u = "", i; try { r = event.clientX; u = event.clientX } catch (v) { } return i = new FormData, i.log_code = n, i.page_code = t, i.absolute_url = document.location.href, i.referrer = l, i.service_cookie_value = e, i.lang_code = a, i.os_info = o, i.browser_info = s, i.resolution = c, i.color_depth = h, i.PCID = b, i.device_type = f, i.platform = navigator.platform, i.coordinateX = r, i.coordinateY = u, i }, i = function (n) { var i = document.domain, t = document.location.pathname.toLowerCase(); return n == "P" ? t == "/" || t == "/default.aspx" ? "AAA" : t.indexOf("mall/main/book") > -1 ? "CAA" : t.indexOf("mall/main/foreign") > -1 ? "CBA" : t.indexOf("mall/main/ebook") > -1 ? "CCA" : t.indexOf("mall/main/music") > -1 ? "CFA" : t.indexOf("mall/main/dvd") > -1 ? "CGA" : t.indexOf("mall/main/gift") > -1 ? "CJA" : t.indexOf("mall/main/used") > -1 ? "CKA" : t.indexOf("searchcorner/search") > -1 ? "BZA" : t.indexOf("24/goods") > -1 ? "IAA" : t.indexOf("product/goods") > -1 ? "IAA" : t.indexOf("cart/cart") > -1 ? "KAA" : t.indexOf("bookclub/intro.aspx") > -1 || t.indexOf("bookclub/main.aspx") > -1 ? "QAA" : t.indexOf("bookclub/bcbest.aspx") > -1 ? "QBA" : t.indexOf("bookclub/update.aspx") > -1 ? "QCA" : t.indexOf("bookclub/intro_product") > -1 ? "QDA" : t.indexOf("bookclub/mybclub.aspx") > -1 ? "QEA" : t.indexOf("bookclub/bcshop.aspx") > -1 ? "QFA" : t.indexOf("bookclub/bcdetail.aspx") > -1 ? "QGA" : t.indexOf("bookclub/search.aspx") > -1 ? "QHA" : t.indexOf("bookclub/guide.aspx") > -1 ? "QIA" : t.indexOf("bookclub/faq.aspx") > -1 ? "QJA" : "AAA" : t == "/" ? "AAA" : t.indexOf("search/search") > -1 ? "BBB" : t.indexOf("/home/books") > -1 ? "CAA" : t.indexOf("/home/ebooks") > -1 ? "CCA" : t.indexOf("/home/used") > -1 ? "CKA" : t.indexOf("/home/gift") > -1 ? "CJA" : t.indexOf("/home/music") > -1 ? "CFA" : t.indexOf("/home/movie") > -1 ? "CHA" : t.indexOf("/home/best") > -1 ? "DZA" : t.indexOf("/home/present") > -1 ? "EZA" : t.indexOf("/home/event") > -1 ? "FYA" : t.indexOf("/main/ebook") > -1 ? "GCA" : t.indexOf("/goods/detail") > -1 ? "HAA" : t.indexOf("/mcart/mcart") > -1 ? "JAA" : t.indexOf("/mcart/mcart") > -1 ? "JAA" : t.indexOf("/mcart/mcart") > -1 ? "JAA" : t.indexOf("bookclub/intro.aspx") > -1 || t.indexOf("bookclub/main.aspx") > -1 ? "OAA" : t.indexOf("/bookclub/bcbest.aspx") > -1 ? "OBA" : t.indexOf("/bookclub/update.aspx") > -1 ? "OCA" : t.indexOf("/bookclub/intro_product") > -1 ? "ODA" : t.indexOf("/bookclub/mybclub.aspx") > -1 ? "OEA" : t.indexOf("/bookclub/bcshop.aspx") > -1 ? "OFA" : t.indexOf("/bookclub/bcdetail.aspx") > -1 ? "OGA" : t.indexOf("/bookclub/search.aspx") > -1 ? "OHA" : t.indexOf("/bookclub/guide.aspx") > -1 ? "OIA" : t.indexOf("/bookclub/faq.aspx") > -1 ? "OJA" : "AAA" }, ut = function (t, i) { var u = k(p, t, i), r = new XMLHttpRequest; r.onreadystatechange = function () { this.readyState == 4 && this.status == 200 && n === !0 && console.log("로그작성 API 호출 됨.") }; r.open("GET", u, !0); r.send(null) }, g = function (t, i) { var u = d(t, i), r; u = JSON.stringify(u); r = new XMLHttpRequest; r.onreadystatechange = function () { this.readyState == 4 && this.status == 200 && n === !0 && console.log("로그작성 API 호출 됨.") }; r.open("POST", w, !0); r.setRequestHeader("Content-type", "application/json"); r.send(u) }, nt = function (t) { var f = document.domain, e = document.location.pathname, u = "", r = ""; if (f.indexOf("mdev.yes24.com") > -1 || f.indexOf("m.yes24.com") > -1 || f.indexOf("ssl.yes24.com") > -1) r = i("M"); else if (e.indexOf("/searchcorner/") > -1) r = "BZA"; else try { u = arguments.callee.caller.name.toLowerCase(); u == "setcode" && (u = arguments.callee.caller.caller.name.toLowerCase()); switch (u) { case "setwcode": r = i("P"); break; case "setcdcode": r = "CAA"; break; case "setcfcode": r = "CBA"; break; case "setcecode": r = "CCA"; break; case "setcmcode": r = "CFA"; break; case "setcvcode": r = "CGA"; break; case "setcgcode": r = "CJA"; break; case "setcucode": r = "CKA"; break; case "setscode": r = "BZA"; break; case "setpcode": r = "IAA"; break; case "setocode": r = "KAA"; break; case "setbccode": r = i("P"); break; default: r = "AAA" } } catch (o) { r = i("P") } n === !0 && console.log("LogCode:" + t + ", PageCode:" + r); try { g(t, r) } catch (o) { n === !0 && console.dir(o) } }; return document.onload = function () { var i = t("PCID"), n; i || (n = (new Date).getTime(), v("PCID", n, 1)) }, { setClickstreamLog: nt } }(clickstream || {});